<!DOCTYPE html>
<html>
<STYLE>A {text-decoration: none;} </STYLE>
<head>
  <link rel="icon" href="favicon.ico" type="image/x-icon"/>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<title>Canvas</title>
<body>
<div id="fb-root"></div>
    <br/>
    <header class="container">
        <div class="row">
            <div class="col-12 col-lg-8">
                <a href="https://venomdevelop.github.io/toku/">
                    <img src="https://raw.githubusercontent.com/VenomDevelop/VenomFlow/master/Tokū%20beta%20black%20logo%20small.png" width="133" height="45" alt="Tokū Beta Logo" /></a>
            </div>

            <div id="tigerface" class="col-12 col-lg-4">

                <div id="tigerfaceimg"></div>


            </div>
        </div>

    </header>
<br>
    <div class="container">
        <div class="row">
            <div id="navmenu" class="col-12 col-lg-8">
                <nav><a href="https://venomdevelop.github.io/toku/">Tōku Home</a> |  <a href="https://venomdevelop.github.io/toku/music">Music</a> | <a href="https://venomdevelop.github.io/toku/draw">Canvas</a> | <a href="https://venomdevelop.github.io/toku/about">About</a> |  <a href="https://venomdevelop.github.io/toku/help">Help</a> <img src="https://github.com/VenomDevelop/toku/blob/master/party_animation_light_theme-00ba34ddc47512dd5ac9.gif?raw=true" width="30" height="30" alt="cool" /></a>
            </div>
            <div class="col-12 col-lg-4">
            
            <br>
              
            </div>
        </div>

<head>
   
<style>
body {

}

canvas {
  border: 2px solid #000000;
  cursor: default;
}

.tools {
  padding: 0 0 30px 0;
}
.tools .brush {
  -webkit-appearance: none;
  display: inline-block;
  vertical-align: middle;
  background-color: #000000;
  border-radius: 50%;
  margin: 0 6px;
  outline: none;
  transition: all 0.4s;
}
.tools .brush:checked, .tools .brush:hover {
  box-shadow: 0 0 3px 3px #aaa;
}
.tools .brush:nth-of-type(1) {
  width: 7px;
  height: 7px;
}
.tools .brush:nth-of-type(2) {
  width: 10px;
  height: 10px;
}
.tools .brush:nth-of-type(3) {
  width: 15px;
  height: 15px;
}
.tools span {
  display: inline-block;
  vertical-align: middle;
  margin: 0 10px;
}
.tools .jscolor {
  outline: none;
  border: none;
  padding: 5px;
  max-width: 46px;
}
.tools .button {
  margin: 0 20px;
  padding: 3px 8px;
  color: #000000;
  border: 1px solid #000000;
  text-decoration: none;
}
.tools .button:hover {
  background-color: #cccccc;
}
@media screen and (max-width: 768px) {
  .tools .button {
    display: block;
    width: 100px;
    margin: 5px auto;
  }
}
</style>

  <script>
  window.console = window.console || function(t) {};
</script>

  
  
  <script>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
</script>


</head>

<body translate="no" >
  <div class="tools">
  <input type="radio" name="size" class="brush" onchange="csize(5);" checked/>
  <input type="radio" name="size" class="brush" onchange="csize(10);"/>
  <input type="radio" name="size" class="brush" onchange="csize(15);"/>
  <span>Change colour:</span><input class="colorPicker" type="color" onChange="changeColor(this);" />
  <a class="button" href="javascript:clearCanvas();">Clear</a>
</div>
<div class="writeCanvasWrapper"></div>
    <script src="https://static.codepen.io/assets/common/stopExecutionOnTimeout-157cd5b220a5c80d4ff8e0e70ac069bffd87a61252088146915e8726e5d9f147.js"></script>

  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>
  
      <script id="rendered-js" >
let canvas, context;
let canvasWidth = window.innerWidth - 44;
let canvasHeight = window.innerHeight - 150;
let lineWidth = 8;
let clickX = [];
let clickY = [];
let clickDrag = [];
let paint = false;
let curColor = "#000000";
let curSize = 5;

function changeColor(input) {
  curColor = input.value;
}

function csize(x) {
  curSize = x;
}

function prepareCanvas() {
  const canvasDiv = document.querySelector('.writeCanvasWrapper');
  canvas = document.createElement('canvas');
  canvas.setAttribute('width', canvasWidth);
  canvas.setAttribute('height', canvasHeight);
  canvas.setAttribute('id', 'canvas');
  canvasDiv.appendChild(canvas);
  context = canvas.getContext("2d");

  $('#canvas').on('mousedown touchstart', function (e) {
    e.preventDefault();
    var touch = e;
    if (e.type != 'mousedown') {
      var touch = e.originalEvent.targetTouches[0] || e.originalEvent.changedTouches[0];
    }
    var mouseX = touch.pageX - this.offsetLeft;
    var mouseY = touch.pageY - this.offsetTop;

    paint = true;
    addClick(mouseX, mouseY, false);
    redraw();
  });

  $('#canvas').on('mousemove touchmove', function (e) {
    e.preventDefault();
    var touch = e;
    if (e.type != 'mousemove') {
      touch = e.originalEvent.targetTouches[0] || e.originalEvent.changedTouches[0];
    }
    if (paint == true) {
      addClick(touch.pageX - this.offsetLeft, touch.pageY - this.offsetTop, true);
      redraw();
    }
  });

  $('#canvas').on('mouseup touchend', function (e) {
    paint = false;
    redraw();
  });

  document.querySelector('#canvas').addEventListener('mouseleave', function () {
    paint = false;
  });
}

function addClick(x, y, dragging) {
  clickX.push(x);
  clickY.push(y);
  clickDrag.push(dragging);
}

function clearCanvas() {
  context.clearRect(0, 0, canvasWidth, canvasHeight);
}

function redraw() {
  var i = clickX.length < 1 ? 0 : clickX.length - 1;
  for (; i < clickX.length; i++) {if (window.CP.shouldStopExecution(0)) break;

    context.beginPath();
    if (clickDrag[i] && i) {
      context.moveTo(clickX[i - 1], clickY[i - 1]);
    }
    context.lineTo(clickX[i], clickY[i]);
    context.closePath();

    context.strokeStyle = 'rgba(23, 45, 45, 1)';
    context.lineCap = "round";
    context.lineWidth = curSize;
    context.stroke();
  }window.CP.exitedLoop(0);
  context.restore();
}

prepareCanvas();
    </script>

  <br>
              <br>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png"/></a>    This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.

</body>

</html>
